var mask={money:function(){var e=this;setTimeout(function(){e.value=function(e){e=e.replace(/\D/g,"");var t=(e=new String(Number(e))).length;return 1==t?e=e.replace(/(\d)/,"0.0$1"):2==t?e=e.replace(/(\d)/,"0.$1"):t>2&&(e=e.replace(/(\d{2})$/,".$1")),e}(e.value)},1)}};function moveOnAdd(){var e=$(".moveButton");$("html,body").animate({scrollTop:e.offset().top},1e3)}function callbackValidation(e){swal({title:"Está faltando rellenar algún campo o archivo",text:"por favor revise su curso",imageUrl:"../assets/img/callback/validation.gif",imageHeight:150,animation:!0,confirmButtonColor:"#4fa7f3"})}$(function(){$("#price").bind("keypress",mask.money),$("#price").bind("keyup",mask.money)}),$(document).ready(function(){$("#basicwizard").bootstrapWizard({tabClass:"nav nav-tabs navtab-wizard nav-justified"}),$("#progressbarwizard").bootstrapWizard({onTabShow:function(e,t,a){var o=(a+1)/t.find("li").length*100;$("#progressbarwizard").find(".bar").css({width:o+"%"})},tabClass:"nav nav-tabs navtab-wizard nav-justified"}),$("#btnwizard").bootstrapWizard({tabClass:"nav nav-tabs navtab-wizard nav-justified",nextSelector:".button-next",previousSelector:".button-previous",firstSelector:".button-first",lastSelector:".button-last"}),$("#rootwizard").bootstrapWizard({tabClass:"nav nav-tabs navtab-wizard nav-justified",onNext:function(e,t,a){if(!$("#commentForm").valid())return $validator.focusInvalid(),!1}})}),$(document).on("click",".moduleContent",function(e){e.preventDefault();var t=$(this).attr("data-mod");$("#controler").val(t),swal({title:"<b>Contenido</b>",showCancelButton:!1,showConfirmButton:!1,html:'            <div class="row">                <div class="col-xl-3">                    <div style="cursor:pointer" data-ext="video"  class="user-box lessonContent">                        <div class="user-img">                            <img src="../assets/img/class/video.png" alt="user-img" class="img-thumbnail img-responsive">                        </div>                        <h5><a href="#">Video</a> </h5>                    </div>                </div>                                <div class="col-xl-3">                    <div style="cursor:pointer" data-ext="audio" class="user-box lessonContent">                        <div class="user-img">                            <img src="../assets/img/class/audio.png" alt="user-img" class="img-thumbnail img-responsive">                        </div>                        <h5><a href="#">Audio</a></h5>                    </div>                </div>                                <div class="col-xl-3">                    <div style="cursor:pointer" data-ext="pdf"  class="user-box lessonContent">                        <div class="user-img">                            <img src="../assets/img/class/pdf.png" alt="user-img" class="img-thumbnail img-responsive">                        </div>                        <h5><a href="#">Pdf</a></h5>                    </div>                </div>                                <div class="col-xl-3">                    <div style="cursor:pointer" data-ext="downloaded"  class="user-box lessonContent">                        <div class="user-img">                            <img src="../assets/img/class/downloaded.png" alt="user-img" class="img-thumbnail img-responsive">                        </div>                        <h5><a href="#">Archivos descargables</a></h5>                    </div>                </div>                                <div class="col-xl-3">                    <div style="cursor:pointer" data-ext="exam" class="user-box" id="exam">                        <div class="user-img">                            <img src="../assets/img/class/test.png" alt="user-img" class="img-thumbnail img-responsive">                        </div>                        <h5><a href="#">Examen</a></h5>                    </div>                </div>            </div>'})}),$(document).ready(function(){var e=1e3,t=$("#newModule").val(),a=parseInt(t)+parseInt(1),o=parseInt(t)-parseInt(1);$(document).on("click","#module",function(o){o.preventDefault(),t<999&&($("#class").append("                    <li class='col-xl-12 mt-md-3 module'>                        <div id='accordion'>                            <div class='card'>                                <div class='card-header' id='headingOne'>                                    <h6 class='m-0'>                                        <div class='input-group'>                                            <div style = 'padding-top:0.5%;' class='checkbox checkbox-success radio-circle'>                                                <input style='display:none' class='position' type='number' value='"+t+"' name='position["+t+"]'>                                                                                                <input class='lockCheck' id='check-"+t+"' name='requireToNext["+t+"]' type='checkbox'>                                                <label for='check-"+t+"'></label>                                            </div>                                                                                        <div class='input-group-append changeArrow'>                                                <a href='#collapseOne"+e+"' class='text-dark' data-toggle='collapse' aria-expanded='true' aria-controls='collapseOne'>                                                    <span class='input-group-text btn-black'>                                                        <i id='arrow' class='mdi mdi-arrow-up-thick'></i>                                                    </span>                                                </a>                                            </div>                                                                                        <input required maxlength='35' type='text' class='form-control' placeholder='Titulo del modulo' name='titleClass["+t+"]'>                                                                                        <div class='input-group-append' ><input name='releaseDateModule["+t+"]'maxlength='10' class='form-control' type='date'></div>                                                                                        <div class='input-group-append'>                                                <span data-mod='"+t+"' class='input-group-text btn-success moduleContent'>                                                    <i class='mdi mdi-plus'></i>                                                </span>                                            </div>                                                                                        <div class='input-group-append'>                                                <span class='input-group-text btn-danger remove_class'>                                                    <i class='mdi mdi-trash-can'></i>                                                </span>                                            </div>                                                                                        <div class='input-group-append'>                                                <span class='input-group-text btn-info handlerClasse'>                                                    <i class='mdi mdi-cursor-move'></i>                                                </span>                                            </div>                                        </div>                                    </h6>                                </div>                                                                <div id='collapseOne"+e+"' class='collapse show' aria-labelledby='headingOne' data-parent='#accordion'>                                    <ol id='"+t+"' class='row sortableContent'></ol>                                </div>                            </div>                        </div>                    </li>"),$("ol.sortableClass").sortable({handle:".handlerClasse",stop:function(e,t){$(this).children().each(function(e){$(this).find("input.position").val(e)})}}),$("input.form-control").maxlength({alwaysShow:!0,warningClass:"badge badge-success",limitReachedClass:"badge badge-danger"}),moveOnAdd(),e++,t++,$("#newModule").val(a))}),$("#class").on("click",".remove_class",function(){var e=$(this).closest(".col-xl-12");swal({title:"Cuidado!                ",text:"Usted está a punto de eliminar el módulo, ¿está seguro?",type:"warning",showCancelButton:!0,timer:0}).then(function(){e.remove(),t--,$("#newModule").val(o)})})}),$(document).ready(function(){var e=0,t=100;$(document).on("click",".lessonContent",function(a){a.preventDefault();var o=$(this).attr("data-ext");if("pdf"==o){o=".pdf";var s="150"}if("video"==o){o="video/*";s="750"}if("audio"==o){o="audio/*";s="750"}if("downloaded"==o){o=".xlsx, .xls, .csv, .docx, .pptx, .zip";s="150"}if(e<999){var i=$("#controler").val();$("#"+i).append("                        <li style='padding-top:2%;' class='col-md-12 video'>                            <div class='form-group row'>                                <div class='col-xl-8'>                                    <div class='input-group'>                                        <input style='display:none'  value='"+e+"' type='number' class='positionLesson' name='positionLesson["+i+"]["+e+"]'>                                        <input required placeholder='Título de la lección' type='text' name='titleLesson["+i+"]["+e+"]' class='form-control' />                                                                                <label for='fupload"+e+t+"' class='control-label label-bordered'>                                            <i class='mdi mdi-cloud-upload mdi-18px'></i>&nbsp;                                             <b class='fileName'>Seleccione un archivo</b>                                        </label>                                                                                <input required data-max-size='"+s+"' id='fupload"+e+t+"' type='file' accept='"+o+"' name='lesson' class='fupload form-control' />                                                                                <input style='display:none'; type='text' class='putFile' name='nameFile["+i+"]["+e+"]'>                                                                                 <label class='control-label trash remove_lesson'>                                        <i style ='color:white;'class=' mdi mdi-trash-can mdi-18px'></i>                                        </label>                                                                                <label class='control-label move handlerContent'>                                            <i style ='color:white;'class='mdi mdi-cursor-move mdi-18px'></i>                                        </label>                                    </div>                                </div>                            </div>                        </li>"),$("ol.sortableContent").sortable({handle:".handlerContent",stop:function(e,t){$(this).children().each(function(e){$(this).find("input.positionLesson").val(e)})}}),$("#controlerFile").val("fupload"+e+t),$(function(){$(".fupload").change(function(){var e=$(this).next(".putFile"),t=$(this),a=$(this).data("max-size");if($("#myBar").ldBar,t.get(0).files.length){if(t.get(0).files[0].size>parseInt(a)*parseInt(1e6))return swal({title:"Ok",text:"Lo archivo supera el tamaño máximo de: "+a+" MB",type:"warning"}),!1;var o=$(this).val().replace(/^.*\\/,"");$(this).parent().children().children("b").html(""+o),$(this).parent().children().children("b").addClass("text-success");var s=new FormData;s.append("lesson",$(this)[0].files[0]);$("#myModal").modal("show"),$.ajax({url:"/reg/lesson",type:"POST",data:s,processData:!1,contentType:!1,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload.onprogress=function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);a=t,$("#myBar").ldBar,bar1.set(a)}var a},e},success:function(t){e.val(t),$("#myModal").modal("hide")}})}else alert("choose file, please")})}),e++,t++}swal({title:"Ok",text:"Selecciona el archivo y no te olvides de colocar el título  ;)",type:"success",confirmButtonColor:"#4fa7f3",timer:0}).then(function(){var e=$("#controlerFile").val();$("#"+e).click()},function(e){})}),$(document).on("click",".remove_lesson",function(){$(this).parent().parent().parent().parent().remove(),e--})}),$(document).ready(function(){control=1,controlQuest=1;var e=1,t=6e3;$(document).on("click","#exam",function(a){if(a.preventDefault(),e<999){var o=$("#controler").val();$("#"+o).append("                        <li style='padding-top:2%;' class='col-md-12 video'>                            <div class='form-group row'>                                <div class='col-xl-8'>                                    <div class='input-group'>                                        <input required placeholder='Título de lo exam' type='text' name='titleExam["+o+"]["+e+"]' class='form-control' />                                                                                <label for='fupload"+e+t+"' class='control-label     label-bordered' data-toggle='modal' data-target='#myModalMultiple"+e+"'><i class='mdi mdi-check-box-outline mdi-18px'></i>&nbsp; <b class='fileName'>Haga clic para editar el examen</b>                                        </label>                                                                                <input id='fupload"+e+t+"'' class='show_question' type='text'>                                                                                <label class='control-label trash remove_exam'><i style ='color:white;'class='mdi mdi-trash-can mdi-18px'></i></label>                                                                                <label class='control-label move handlerContent'><i style ='color:white;'class='mdi mdi-cursor-move mdi-18px'></i>                                        </label>                                                                            </div>                                </div>                            </div>                        </li>                                                <div class='modal fade' id='myModalMultiple"+e+"' tabindex='-1' role='dialog' aria-labelledby='myModalLabel'>                            <div class='modal-dialog modal-lg modal-dialog-centered' role='document'>                                <div class='modal-content'>                                    <div class='modal-header'>                                        <div class='col-6'>                                              <div class='form-group'>                                                 <div class='input-group'>                                                    <input  id='timepicker"+e+"' type='time' name=timing["+e+"] class='form-control'>                                                                                                        <div style='cursor:help;' tabindex='0'                  data-toggle='popover' data-trigger='focus'            data-content='Tiempo de duración del examen'                               data-original-title='Tiempo'                          lass='input-group-append'>                                                       <span class='input-group-text'><i class='mdi mdi-clock'></i></span>                                                    </div>&nbsp;&nbsp;&nbsp;                                                                                                        <input min='1' onKeyUp='if(this.value>99){this.value=100;}else if(this.value<0){this.value=0;}' max='100'  type='number' name='approval["+e+"]' class='form-control'>                                                                                                        <div style='cursor:help;' tabindex='0'                  data-toggle='popover' data-trigger='focus'            data-content='Porcentaje minimo de aprobación del examen'                                data-original-title='Aprobación'                      class='input-group-append'>                                                      <span  class='input-group-text'><i class='mdi mdi-percent'></i></span>                                                </div>                                            </div>                                        </div>                                    </div>\x3c!-- Modal header --\x3e                                                                        <button data-dismiss='modal' class='btn btn-success waves-effect waves-light m-b-5'>                                        <span>Guardar</span>                                    </button>                                </div>\x3c!-- Modal content --\x3e                                                                <div class='modal-body'>                                    <div id='place_question"+o+e+"'>                                        <div class='removeQuestion'>                                            <div class='col-12'>                                                <div class='input-group'>                                                    <input  type='text' placeholder='Ex: ¿Cuál es la mejor plataforma de capacitación? 'class='form-control verifyQuestion' name='question["+e+"]["+controlQuest+"]'>                                                                                                        <div class='input-group-append'>                                                        <button class='btn btn-danger waves-effect waves-light' type='button'><i class='mdi mdi-trash-can mdi-18px remove_question'></i>                                                        </button>                                                    </div>                                                </div>                                            </div>                                            </br>                                                                                        <div id='answer"+e+controlQuest+"' class='verifyCorrect'>                                                <div class='form-group row'>                                                    <div class='col-1'></div>                                                    <div class='col-1'>                                                         <div  class='custom-control custom-checkbox'>                                                            <input  type='checkbox' name='correct["+controlQuest+"]["+control+"]' class='custom-control-input' id='customCheck"+e+"11'>                                                                                                                        <label class='custom-control-label' for='customCheck"+e+"11'></label>                                                        </div>                                                    </div>                                                    <div class='col-8'>                                                         <div class='input-group'>                                                            <input required name='answer["+controlQuest+"]["+control+"]' placeholder='Ex: Bit4learn' type='text' class='form-control'>                                                                                                                        <div class='input-group-append'>                                                                <button class='btn btn-danger waves-effect waves-light' type='button'><i class='mdi mdi-trash-can mdi-18px remove_answer'></i></button>                                                        </div>                                                    </div>                                                    </br>                                                   </div>                                            </div> \x3c!-- Fim resposta--\x3e                                        </div>\x3c!-- Remove question --\x3e                                        <div classs='removeAnswer'>                                            <div style='margin-top:-2%;' class='row'>                                                <div class='col-2'></div>                                                <div class='col-6'>                                                    <button id='add_answer' name='answer"+e+controlQuest+"' class='btn btn-sm btn-info waves-effect waves-light m-b-5'> <span>Adicionar respuesta</span>                                                    </button>                                                </div>                                            </div>                                        </div>                                        </br></br><hr>                                    </div>\x3c!--Place question --\x3e                                                                    </div>\x3c!-- Modal body ---\x3e                                  <button  id='add_question' name='place_question"+o+e+"' class='btn btn-purple waves-effect waves-light m-b-5'> <span>Adicionar pregunta</span></button>                            </div>\x3c!-- Modal dialog --\x3e                        </div>\x3c!-- Modal fase --\x3e"),$("ol.sortableContent").sortable({handle:".handlerContent"}),$('[data-toggle="popover"]').popover(),$("#controlerFile").val("fupload"+e+t),$(function(){$(".fupload").change(function(){var e=$(this),t=$(this).data("max-size");if(console.log(e.get(0).files[0].size),!e.get(0).files.length)return alert("choose file, please"),!1;if(e.get(0).files[0].size>parseInt(t)*parseInt(1e6))return swal({title:"Ok",text:"Lo excel supera el tamaño máximo de: "+t+" MB",type:"warning"}),!1;var a=$(this).val().replace(/^.*\\/,"");$(this).parent().children().children("b").html(""+a),$(this).parent().children().children("b").addClass("text-success")})}),e++,t++,control=parseInt(control)+parseInt(1),controlQuest=parseInt(controlQuest)+parseInt(1)}swal({title:"Creación de examen",type:"success",confirmButtonColor:"#4fa7f3",timer:0}).then(function(){var e=$("#controlerFile").val();$("#"+e).parent().children(".label-bordered").click()})}),$(document).on("click",".remove_exam",function(){$(this).closest(".col-md-12").remove(),e--})}),$(document).ready(function(){var e=2;$(document).on("click","#add_question",function(t){t.preventDefault();var a=$(this).attr("name"),o=$(this).attr("name").charAt(15);$("#"+a).append("                         <div class='removeQuestion'>                            <div class='col-12'>                                <div class='input-group'>                                    <input placeholder='pregunta' type='text' name='question["+o+"]["+controlQuest+"]' class='form-control verifyQuestion'>                                    <div class='input-group-append'>                                        <button class='btn btn-danger waves-effect waves-light' type='button'><i class='mdi mdi-trash-can mdi-18px remove_question'></i></button>                                    </div>                                </div>                            </div>                            </br>                                                        \x3c!-- Resposta --\x3e                            <div id='answer"+o+controlQuest+"' class='verifyCorrect'>                                <div class='form-group row'>                                    <div class='col-1'></div>                                    <div class='col-1'>                                         <div  class='custom-control custom-checkbox'>                                            <input  type='checkbox' name='correct["+controlQuest+"]["+control+"]' class='custom-control-input' id='customCheck"+o+e+"1'>                                            <label class='custom-control-label' for='customCheck"+o+e+"1'></label>                                        </div>                                    </div>                                                                        <div class='col-8'>                                        <div class='input-group'>                                            <input required name='answer["+controlQuest+"]["+control+"]' placeholder='Respuesta' type='text' class='form-control'>                                            <div class='input-group-append'>                                                <button class='btn btn-danger waves-effect waves-light' type='button'><i class='mdi mdi-trash-can mdi-18px'></i></button>                                            </div>                                        </div>                                        </br>                                      </div>                                </div>                             </div> \x3c!-- Fim resposta --\x3e                            \x3c!--Botao adicionar nova resposta --\x3e                            <div class='removeAnswer'>                                <div style='margin-top:-2%;' class='row'>                                    <div class='col-2'></div>                                        <div class='col-6'>                                            <button name='answer"+o+controlQuest+"' id='add_answer' class='btn btn-sm btn-info waves-effect waves-light m-b-5 answer"+controlQuest+"'> <span>Adicionar respuesta</span></button>                                        </div>                                    </div>                                </div>                            </br></br><hr></div>                        </div> \x3c!-- Remove question --\x3e                                               "),e++,control=parseInt(control)+parseInt(1),controlQuest=parseInt(controlQuest)+parseInt(1)}),$(document).on("click",".remove_question",function(t){t.preventDefault(),$(this).closest(".removeQuestion").remove(),$(this).next(".removeAnswer").remove(),e--})}),$(document).ready(function(){var e=2;$(document).on("click","#add_answer",function(t){t.preventDefault();var a=$(this).attr("name"),o=$(this).attr("name").charAt(6),s=$(this).attr("name").charAt(7);$("#"+a).append("                        <div class='form-group row'>                              <div class='col-1'></div>                            <div class='col-1'>                                 <div  class='custom-control custom-checkbox'>                                    <input name='correct["+s+"]["+control+"]' type='checkbox' class='custom-control-input' id='customCheck"+o+s+e+"'>                                    <label class='custom-control-label' for='customCheck"+o+s+e+"'></label>                                </div>                            </div>                            <div class='col-8'>                                <div class='input-group'>                                    <input required name='answer["+s+"]["+control+"]' placeholder='Respuesta' type='text' class='form-control'>                                    <div class='input-group-append'>                                        <button class='btn btn-danger waves-effect waves-light remove_answer' type='button'><i class='mdi mdi-trash-can mdi-18px'></i></button>                                    </div>                                </div>                                </br>                                </div>                        </div> \x3c!-- Fim resposta--\x3e"),e++,control=parseInt(control)+parseInt(1)}),$(document).on("click",".remove_answer",function(t){t.preventDefault(),$(this).parent().parent().parent().parent().remove(),e--})}),$(document).ready(function(){$(document).on("click",".changeArrow",function(e){(e.preventDefault(),$(this).parent().parent().parent().parent().parent().parent().find("ol").children().length)&&("mdi mdi-arrow-down-thick"==$(this).children().children().children().attr("class")?($(this).children().children().children().removeClass("mdi mdi-arrow-down-thick"),$(this).children().children().children().addClass("mdi mdi-arrow-up-thick")):($(this).children().children().children().removeClass("mdi mdi-arrow-up-thick"),$(this).children().children().children().addClass("mdi mdi-arrow-down-thick")))})}),$(document).ready(function(){$("#register_button").click(function(e){e.preventDefault();var t=$("#register_form").serialize(),a=0;return $("[required]").each(function(){$(this).val()||a++}),$(".verifyCorrect").each(function(){var e=$(this).children().children().children(),t=0;$(e.children("input[type='checkbox']")).each(function(){$(this).is(":checked")&&t++}),0==t&&a++}),0!=a?(callbackValidation(),!1):($("body").loadingModal({position:"auto",text:"Guardando su curso, espere ...",color:"#fff",opacity:"0.7",backgroundColor:"rgb(0,0,0)",animation:"foldingCube"}),$.ajax({url:"/reg/course",type:"POST",data:t,success:function(e){$("body").loadingModal("destroy"),swal({title:"Curso creado",type:"success",confirmButtonColor:"#4fa7f3"}).then(function(){document.location.reload(!0)})}}),!1)})}),$(document).ready(function(){$("#edit_button").click(function(e){e.preventDefault();var t=new FormData($("#edit_form")[0]),a=0;return $("[required]").each(function(){$(this).val()||a++}),0!=a?(callbackValidation(),!1):($("body").loadingModal({position:"auto",text:"Salvando su curso, espere ...",color:"#fff",opacity:"0.7",backgroundColor:"rgb(0,0,0)",animation:"foldingCube"}),$.ajax({url:"/edit/course",type:"POST",data:t,processData:!1,contentType:!1,success:function(e){$("body").loadingModal("destroy"),swal({title:"Éxito",text:"Curso editado com sucesso!",type:"success",confirmButtonColor:"#4fa7f3"}).then(function(){document.location.reload(!0)})}}),!1)})});