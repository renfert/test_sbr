(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["profile"],{3214:function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return $}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-page"},[a("profile-edit")],1)},r=[],n=a("2b0e"),o=a("342d"),i=a.n(o),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-box text-center"},[a("form",{attrs:{id:"form-profile"},on:{submit:function(t){return t.preventDefault(),e.editProfile()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],staticClass:"hide",attrs:{type:"number",name:"userId"},domProps:{value:e.userId},on:{input:function(t){t.target.composing||(e.userId=t.target.value)}}}),a("div",{staticClass:"form-group"},[a("div",{staticClass:"image-upload",staticStyle:{"text-align":"center"}},[a("label",{attrs:{for:"file-input"}},[a("el-avatar",{staticStyle:{cursor:"pointer"},attrs:{size:100,fit:"none"}},[a("img",{attrs:{src:e.$getUrlToContents()+"avatar/"+e.avatar}})])],1),a("input",{attrs:{name:"avatar",type:"text"},domProps:{value:e.avatar}}),a("input",{attrs:{id:"file-input",type:"file"},on:{change:function(t){return t.preventDefault(),e.uploadAvatar(t)}}})])]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["name"]))]),a("el-input",{attrs:{name:"name"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["description"]))]),a("el-input",{attrs:{type:"textarea",name:"description"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("label",[e._v(e._s(e.lang["change-password"]))]),a("el-switch",{staticClass:"m-4",model:{value:e.changePassword,callback:function(t){e.changePassword=t},expression:"changePassword"}}),e.changePassword?a("div",[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["new-password"]))]),a("el-input",{attrs:{type:"password",name:"password"},on:{focus:function(t){e.showConfirmPassword=!0}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e.showConfirmPassword?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["confirm-password"]))]),a("el-input",{attrs:{type:"password"},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1):e._e()]):e._e(),a("div",{staticClass:"form-group"},[a("el-button",{staticClass:"sbr-primary",attrs:{"native-type":"submit"}},[e._v(e._s(e.lang["save-button"]))])],1)],1),a("helper-progress")],1)},c=[],d=(a("a4d3"),a("e01a"),a("b0c0"),a("ac1f"),a("1276"),a("5530")),u=a("a82d"),p=a("31ce"),f=a.n(p),m=a("b5e8"),v=a.n(m),g=a("2f62"),h={components:{HelperProgress:u["a"]},props:["testimonial-id"],data:function(){return{name:"",userId:"",avatar:"",description:"",password:"",confirmPassword:"",confirmPasswordShow:"",showConfirmPassword:!1,changePassword:!1,subDomainName:""}},mounted:function(){this.getSubDomainName(),this.getProfile()},computed:Object(d["a"])({},Object(g["c"])(["lang"])),methods:{uploadAvatar:function(e){this.upload(e);var t=e.target;t.files&&t.files[0]&&this.render(t)},render:function(e){var t=new FileReader;t.onload=function(t){var a=e.parentElement,s=a.getElementsByTagName("img")[0];s.src=t.target.result},t.readAsDataURL(e.files[0])},upload:function(e){var t=this,a=e.target.files[0],s=a.name,r=s.split(".").pop(),n=this.generateFileName(40)+"."+r;u["b"].$emit("new-progress"),f.a.config.update({accessKeyId:"AKIA5AQZS5JMAWUELDG7",secretAccessKey:"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",region:"us-east-1"});var o=new v.a({params:{Bucket:"sabiorealm"}}),i={Key:this.subDomainName+"/uploads/avatar/"+n,ContentType:a.type,Body:a};o.upload(i).on("httpUploadProgress",(function(e){var t=Math.round(parseInt(100*e.loaded/e.total));u["b"].$emit("new-percent",t)})).send((function(){t.avatar=n,u["b"].$emit("finish-progress")}))},editProfile:function(){var e=this;if(this.password!==this.confirmPassword)this.$message({message:"The passwords are different",type:"warning"});else{var t=document.getElementById("form-profile"),a=new FormData(t),s=this.$getUrlToMakeRequest("user","editProfile");this.$request.post(s,a).then((function(){e.$successMessage(),$.$emit("profile-edited")}),(function(){e.$errorMessage()}))}},getProfile:function(){var e=this;this.loading=!0;var t=new FormData,a=this.$getUrlToMakeRequest("user","getUserProfile");t.set("testimonialId",this.testimonialId),this.$request.post(a,t).then((function(t){e.userId=t.data.id,e.avatar=t.data.avatar,e.name=t.data.name,e.description=t.data.description,e.loading=!1}),(function(){e.$errorMessage()}))},generateFileName:function(e){for(var t=new Date,a=t.getHours()+t.getMinutes()+t.getSeconds(),s="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,o=0;o<e;o++)s+=r.charAt(Math.floor(Math.random()*n));return s+a},getSubDomainName:function(){var e=this,t=this.$getUrlToMakeRequest("verify","getSubDomainName");this.$request.get(t).then((function(t){e.subDomainName=t.data}),(function(){e.$errorMessage()}))}}},w=h,b=a("2877"),y=Object(b["a"])(w,l,c,!1,null,null,null),P=y.exports,$=new n["default"];n["default"].use(i.a);var C={components:{ProfileEdit:P},head:{title:{inner:"Profile"},meta:[{name:"charset",content:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"},{name:"author",content:"Sabiorealm"}]}},S=C,_=Object(b["a"])(S,s,r,!1,null,null,null);t["default"]=_.exports},e01a:function(e,t,a){"use strict";var s=a("23e7"),r=a("83ab"),n=a("da84"),o=a("5135"),i=a("861d"),l=a("9bf2").f,c=a("e893"),d=n.Symbol;if(r&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new d(e):void 0===e?d():d(e);return""===e&&(u[t]=!0),t};c(p,d);var f=p.prototype=d.prototype;f.constructor=p;var m=f.toString,v="Symbol(test)"==String(d("test")),g=/^Symbol\((.*)\)[^)]+$/;l(f,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=m.call(e);if(o(u,e))return"";var a=v?t.slice(7,-1):t.replace(g,"$1");return""===a?void 0:a}}),s({global:!0,forced:!0},{Symbol:p})}}}]);
//# sourceMappingURL=profile.4e0516d5.js.map