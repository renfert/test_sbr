(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editprogram"],{"1b0f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-page"},[a("edit-program")],1)},s=[],o=a("2b0e"),i=a("342d"),n=a.n(i),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v(e._s(e.lang["edit-program"]))]),a("br"),a("form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"form-program"},on:{submit:function(t){return t.preventDefault(),e.edit()}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.programId,expression:"programId"}],staticClass:"hide",attrs:{name:"programId",type:"text"},domProps:{value:e.programId},on:{input:function(t){t.target.composing||(e.programId=t.target.value)}}}),a("el-tabs",{attrs:{"tab-position":"top"}},[a("el-tab-pane",{attrs:{label:"Basic information"}},[a("div",{staticClass:"row gap5"},[a("div",{staticClass:"col-10"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["name"]))]),a("el-input",{attrs:{required:"",name:"title",placeholder:e.lang["name"]},model:{value:e.programTitle,callback:function(t){e.programTitle=t},expression:"programTitle"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["start-date"]))]),a("br"),a("el-date-picker",{attrs:{name:"release_date",type:"date",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",placeholder:"Pick a day"},model:{value:e.release,callback:function(t){e.release=t},expression:"release"}})],1),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.lang["end-date"]))]),a("br"),a("el-date-picker",{attrs:{name:"expiration_date",type:"date",format:"yyyy/MM/dd","value-format":"yyyy-MM-dd",placeholder:"Pick a day"},model:{value:e.expiration,callback:function(t){e.expiration=t},expression:"expiration"}})],1),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.programDescription,expression:"programDescription"}],staticClass:"hide",attrs:{name:"description"},domProps:{value:e.programDescription},on:{input:function(t){t.target.composing||(e.programDescription=t.target.value)}}}),a("label",{staticClass:"col-form-label"},[e._v(e._s(e.lang["description"]))]),a("wysiwyg",{model:{value:e.programDescription,callback:function(t){e.programDescription=t},expression:"programDescription"}})],1)])])]),a("el-tab-pane",{attrs:{label:"Courses"}},[a("div",{staticClass:"mt-5"},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"Course"},model:{value:e.course,callback:function(t){e.course=t},expression:"course"}},e._l(e.coursesList,(function(e){return a("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),1)],1),a("el-form-item",[a("el-button",{staticClass:"sbr-purple",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.addCourse()}}},[e._v(e._s(e.lang["add-course"]))])],1)],1),a("div",{staticClass:"mb-5"},[a("ul",{staticClass:"list-group"},[a("draggable",{attrs:{"ghost-class":"ghost"},on:{end:e.repositioning}},[a("transition-group",{attrs:{type:"transition",name:"flip-list"}},[e._l(e.coursesProgram,(function(t){return a("li",{key:t.id,staticClass:"list-group-item d-flex justify-content-between align-items-center sortable"},[a("div",[a("i",{staticClass:"remove-course el-icon-delete sbr-text-danger mr-5",staticStyle:{cursor:"pointer !important"}}),a("input",{staticClass:"courses-position hide",attrs:{name:"courses["+parseInt(t.position)+"]"},domProps:{value:t.id}}),e._v(" "+e._s(t.title)+" ")])])})),e._l(e.selectedCourses,(function(t){return a("li",{key:t.id,staticClass:"list-group-item d-flex justify-content-between align-items-center sortable"},[a("div",{domProps:{innerHTML:e._s(t.text)}})])}))],2)],1)],1)])],1)])]),a("el-tab-pane",{attrs:{label:"Image"}},[a("div",{staticClass:"row gap5"},[a("div",{staticClass:"col-md-6 col-12"},[""!=e.srcImg?a("upload",{attrs:{"src-img":e.srcImg,"src-name":e.srcName,"do-upload":"true","box-height":"200","return-name":"photo","input-name":"file","bucket-key":"uploads/program",acceptable:".png,.jpg,.jpeg"}}):e._e()],1)])])],1),a("br"),a("el-button",{staticClass:"sbr-primary",attrs:{"native-type":"submit"}},[e._v(e._s(e.lang["save-button"]))])],1),a("helper-progress")],1)},c=[],d=(a("a4d3"),a("e01a"),a("7db0"),a("4160"),a("159b"),a("5530")),u=a("bc3a"),p=a.n(u),m=a("a7fe"),g=a.n(m),f=a("310e"),h=a.n(f),v=a("a82d"),b=a("c3b3"),y=a.n(b),C=a("8ed8"),_=a("9808"),x=a("5c96"),k=a.n(x),w=a("3140"),I=a("1157"),M=a.n(I),P=a("2f62");o["default"].use(y.a,{hideModules:{image:!0,code:!0,table:!0,hyperlink:!0}}),o["default"].use(k.a),o["default"].use(g.a,p.a);var D={mixins:[C["a"],_["a"]],data:function(){return{programId:"",programTitle:"",programDescription:"",srcImg:"",srcName:"",release:"",expiration:"",description:"",course:"",coursesList:[],coursesProgram:[],selectedCourses:[],cont:0,loading:!1}},components:{Upload:w["a"],draggable:h.a,HelperProgress:v["a"]},created:function(){this.programId=this.$route.params.id},mounted:function(){this.getProgram(),this.getCourses(),this.getProgramCourses()},computed:Object(d["a"])({},Object(P["c"])(["lang"])),methods:{repositioning:function(){M()(".courses-position").each((function(e){M()(this).attr("name","courses["+e+"]")}))},addCourse:function(){var e=this,t=this.coursesList.find((function(t){return t.key==e.course})),a={id:this.course,text:"            <i style='cursor:pointer !important;' class='remove-course el-icon-delete sbr-text-danger mr-5'></i>            <input class='courses-position hide' name='courses["+this.cont+"]' value='"+this.course+"'>            "+t.label+"          "};this.cont++,this.selectedCourses.push(a)},getProgram:function(){var e=this,t=new FormData;t.set("programId",this.programId);var a=this.getUrlToMakeRequest("program","get");p.a.post(a,t).then((function(t){e.programTitle=t.data[0]["title"],e.programDescription=t.data[0]["description"],e.srcName=t.data[0]["photo"],e.srcImg=e.getUrlToContents()+"program/"+t.data[0]["photo"],e.expiration=t.data[0]["expiration_date"],e.release=t.data[0]["release_date"]}),function(){this.errorMessage()}.bind(this))},getCourses:function(){var e=this,t=this.getUrlToMakeRequest("program","getCourses");p.a.get(t).then((function(t){e.coursesList=t.data}),function(){this.errorMessage()}.bind(this))},edit:function(){var e=document.getElementById("form-program"),t=new FormData(e),a=this.getUrlToMakeRequest("program","edit");p.a.post(a,t).then(function(){this.successMessage()}.bind(this),function(){this.errorMessage()}.bind(this))},getProgramCourses:function(){var e=this,t=new FormData;t.set("programId",this.programId);var a=this.getUrlToMakeRequest("program","getProgramCourses");p.a.post(a,t).then((function(t){t.data.forEach((function(t){e.cont=parseInt(t.position)+1})),e.coursesProgram=t.data}),function(){this.errorMessage()}.bind(this))}}},T=D,j=a("2877"),E=Object(j["a"])(T,l,c,!1,null,"ae37b830",null),N=E.exports,U=a("a20e");o["default"].use(n.a);var q={mixins:[U["a"],_["a"],C["a"]],components:{EditProgram:N},created:function(){this.blockStudentAccess()},head:{title:{inner:"Edit program"},meta:[{name:"charset",content:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"},{name:"author",content:"Sabiorealm"}]}},L=q,O=Object(j["a"])(L,r,s,!1,null,"46a72f96",null);t["default"]=O.exports}}]);
//# sourceMappingURL=editprogram.23725ec6439cba6823d9.js.map