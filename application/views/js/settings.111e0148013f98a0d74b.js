(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{3140:function(e,t,a){"use strict";a.d(t,"b",(function(){return y}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[1==e.loading?a("facebook-loader",{attrs:{speed:2,width:"700",height:"200",primaryColor:"#f0f0f0",secondaryColor:"#d9d9d9"}}):a("div",{staticClass:"drop-area",style:e.style},[a("input",{attrs:{name:e.returnName,type:"text"},domProps:{value:e.name}}),a("input",{staticClass:"upload",attrs:{name:e.inputName,accept:e.acceptable,type:"file"},on:{change:function(t){return t.preventDefault(),e.preview(t,e.doUpload)}}}),a("div",{staticClass:"drop-message",class:e.messageClass},[a("span",{staticClass:"file-icon",class:e.icon}),a("p",[e._v(e._s(e.message))])]),a("div",{staticClass:"drop-preview on",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"drop-img"},[a("img",{staticClass:"preview",attrs:{src:e.previewImg,alt:""}})])])]),a("input",{staticClass:"hide",attrs:{type:"text",name:"real_name"},domProps:{value:e.realName}})],1)},i=[],n=(a("c975"),a("b0c0"),a("ac1f"),a("1276"),a("e808")),o=a("2b0e"),l=a("bc3a"),r=a.n(l),c=a("a7fe"),u=a.n(c),d=a("854a"),m=a.n(d),p=a("a82d"),f=a("8ed8"),g=a("9808"),h=a("31ce"),v=a.n(h),b=a("b5e8"),C=a.n(b),w=a("e330"),x=a("21fb");o["default"].use(u.a,r.a),o["default"].use(m.a);var y=new o["default"],k={components:{FacebookLoader:w["b"]},mixins:[f["a"],g["a"]],data:function(){return{lang:{},icon:"fas fa-cloud-upload-alt",message:"Upload a file",src:"",messageClass:"",loading:!1,realName:"",name:"",previewImg:"",subDomainName:"",storageAvailability:!0}},props:["acceptable","input-name","do-upload","return-name","bucket-key","box-height","src-name","src-img","src-real-name"],created:function(){this.checkStorageAvailability()},mounted:function(){this.getSubDomainName(),void 0!=this.srcName&&null!=this.srcName&&""!=this.srcName&&(this.loadDefaultName(),this.message=this.srcRealName,this.realName=this.srcRealName),void 0!=this.srcImg&&null!=this.srcImg&&""!=this.srcImg&&this.loadDefaultImg(),n["b"].$on("lang",function(e){this.lang=e}.bind(this)),y.$on("clear",function(){this.realName="",this.message="Upload a file",this.icon="fas fa-cloud-upload-alt",this.previewImg=""}.bind(this))},methods:{preview:function(e,t){if(this.storageAvailability){var a=this;void 0!=t&&a.upload(e);var s=e.target,i=s.value,n=i.split(/(\\|\/)/g).pop(),o=i.split(".").pop();if(this.realName=n,s.files&&s.files[0]){var l=a.acceptable;if(-1==l.indexOf(o)&&".*"!=l)a.message="Invalid extension: "+o,a.icon="fas fa-exclamation-triangle sbr-text-danger",s.value="";else switch(o){case"png":a.messageClass="hide",a.render(s);break;case"jpg":a.render(s),a.messageClass="hide";break;case"jpeg":a.render(s),a.messageClass="hide";break;case"xlsx":a.icon="fas fa-file-pdf text-default",a.message=n;break;case"pdf":a.icon="fas fa-file-excel text-default",a.message=n;break;case"docx":a.icon="fas fa-file-word text-default",a.message=n;break;case"mp4":a.icon="fas fa-file-video text-default",a.message=n;break;case"mov":a.icon="fas fa-file-video text-default",a.message=n;break;case"mp3":a.icon="fas fa-file-audio text-default",a.message=n;break;case"pptx":a.icon="fas fa-file-powerpoint text-default",a.message=n;break;case"zip":a.icon="fas fa-file-archive text-default",a.message=n;break;default:a.icon="fas fa-file text-default",a.message=n}}}else x["b"].$emit("upgrade-plan","storage"),this.icon="fas fa-lock sbr-text-danger",this.message="Full storage",this.previewImg="",this.realName="",this.src=""},render:function(e){var t=new FileReader;t.onload=function(t){var a=e.parentElement,s=a.getElementsByTagName("img")[0];s.src=t.target.result},t.readAsDataURL(e.files[0])},checkStorageAvailability:function(){var e=this;this.loading=!0;var t=this.getUrlToMakeRequest("verify","checkStorageAvailability");r.a.get(t).then((function(t){e.storageAvailability=t.data,setTimeout(function(){this.loading=!1}.bind(e),1e3)}),function(){this.errorMessage()}.bind(this))},upload:function(e){if("uploads/html"==this.bucketKey)this.uploadHtml(e);else{var t=e.target.files[0],a=t.name,s=a.split(".").pop(),i=this.generateFileName(40)+"."+s;p["b"].$emit("new-progress"),v.a.config.update({accessKeyId:"AKIA5AQZS5JMAWUELDG7",secretAccessKey:"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",region:"us-east-1"});var n=new C.a({params:{Bucket:"sabiorealm"}}),o={Key:this.subDomainName+"/"+this.bucketKey+"/"+i,ContentType:t.type,Body:t};n.upload(o).on("httpUploadProgress",(function(e){var t=Math.round(parseInt(100*e.loaded/e.total));p["b"].$emit("new-percent",t)})).send((function(){e.target.value=null;var t=e.target.parentElement.children[0];t.value=i,p["b"].$emit("finish-progress"),y.$emit("finish-upload")}))}},uploadHtml:function(e){this.extractFilesFromTmpFolder(e),this.createFolder(),this.moveTmpFilesTos3()},createFolder:function(){v.a.config.update({accessKeyId:"AKIA5AQZS5JMAWUELDG7",secretAccessKey:"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",region:"us-east-1"});var e=this.generateFileName(30),t=this.subDomainName+"/uploads/html/"+e+"/",a=new C.a({params:{Bucket:"sabiorealm"}}),s={Key:t};a.putObject(s,(function(t){return!t&&e}))},extractFilesFromTmpFolder:function(e){var t=e.target.files[0],a=new FormData;a.set("html",t);var s=this.getUrlToMakeRequest("upload","uploadHtml");r.a.post(s,a).then((function(){}),function(){this.errorMessage()}.bind(this))},getSubDomainName:function(){var e=this,t=this.getUrlToMakeRequest("verify","getSubDomainName");r.a.get(t).then((function(t){e.subDomainName=t.data}),function(){this.errorMessage()}.bind(this))},loadDefaultName:function(){this.name=this.srcName},loadDefaultImg:function(){if(null!=this.srcName){var e=this.srcName.split(".",2),t=e[1];"png"==t||"jpg"==t||"jpeg"==t?(this.previewImg=this.srcImg,this.messageClass="hide",this.icon=""):this.icon="fas fa-cloud-upload-alt"}},moveTmpFilesTos3:function(){},generateFileName:function(e){for(var t=new Date,a=t.getHours()+t.getMinutes()+t.getSeconds(),s="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length,o=0;o<e;o++)s+=i.charAt(Math.floor(Math.random()*n));return s+a}},computed:{style:function(){return"height: "+this.boxHeight+"px"}}},T=k,N=(a("7f6c"),a("2877")),D=Object(N["a"])(T,s,i,!1,null,"e58254b8",null);t["a"]=D.exports},"7f6c":function(e,t,a){"use strict";var s=a("f2d9"),i=a.n(s);i.a},"854a":function(e,t,a){var s,i;(function(n){s=[a("1157")],i=function(e){return function(){var t,a,s,i=0,n={error:"error",info:"info",success:"success",warning:"warning"},o={clear:p,remove:f,error:l,getContainer:r,info:c,options:{},subscribe:u,success:d,version:"2.1.4",warning:m};return o;function l(e,t,a){return w({type:n.error,iconClass:x().iconClasses.error,message:e,optionsOverride:a,title:t})}function r(a,s){return a||(a=x()),t=e("#"+a.containerId),t.length||s&&(t=v(a)),t}function c(e,t,a){return w({type:n.info,iconClass:x().iconClasses.info,message:e,optionsOverride:a,title:t})}function u(e){a=e}function d(e,t,a){return w({type:n.success,iconClass:x().iconClasses.success,message:e,optionsOverride:a,title:t})}function m(e,t,a){return w({type:n.warning,iconClass:x().iconClasses.warning,message:e,optionsOverride:a,title:t})}function p(e,a){var s=x();t||r(s),h(e,s,a)||g(s)}function f(a){var s=x();t||r(s),a&&0===e(":focus",a).length?y(a):t.children().length&&t.remove()}function g(a){for(var s=t.children(),i=s.length-1;i>=0;i--)h(e(s[i]),a)}function h(t,a,s){var i=!(!s||!s.force)&&s.force;return!(!t||!i&&0!==e(":focus",t).length)&&(t[a.hideMethod]({duration:a.hideDuration,easing:a.hideEasing,complete:function(){y(t)}}),!0)}function v(a){return t=e("<div/>").attr("id",a.containerId).addClass(a.positionClass),t.appendTo(e(a.target)),t}function b(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function C(e){a&&a(e)}function w(a){var n=x(),o=a.iconClass||n.iconClass;if("undefined"!==typeof a.optionsOverride&&(n=e.extend(n,a.optionsOverride),o=a.optionsOverride.iconClass||o),!M(n,a)){i++,t=r(n,!0);var l=null,c=e("<div/>"),u=e("<div/>"),d=e("<div/>"),m=e("<div/>"),p=e(n.closeHtml),f={intervalId:null,hideEta:null,maxHideTime:null},g={toastId:i,state:"visible",startTime:new Date,options:n,map:a};return v(),k(),w(),C(g),n.debug&&console&&console.log(g),c}function h(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function v(){T(),D(),_(),S(),I(),O(),N(),b()}function b(){var e="";switch(a.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}c.attr("aria-live",e)}function w(){n.closeOnHover&&c.hover(F,H),!n.onclick&&n.tapToDismiss&&c.click(E),n.closeButton&&p&&p.click((function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),n.onCloseClick&&n.onCloseClick(e),E(!0)})),n.onclick&&c.click((function(e){n.onclick(e),E()}))}function k(){c.hide(),c[n.showMethod]({duration:n.showDuration,easing:n.showEasing,complete:n.onShown}),n.timeOut>0&&(l=setTimeout(E,n.timeOut),f.maxHideTime=parseFloat(n.timeOut),f.hideEta=(new Date).getTime()+f.maxHideTime,n.progressBar&&(f.intervalId=setInterval(A,10)))}function T(){a.iconClass&&c.addClass(n.toastClass).addClass(o)}function N(){n.newestOnTop?t.prepend(c):t.append(c)}function D(){if(a.title){var e=a.title;n.escapeHtml&&(e=h(a.title)),u.append(e).addClass(n.titleClass),c.append(u)}}function _(){if(a.message){var e=a.message;n.escapeHtml&&(e=h(a.message)),d.append(e).addClass(n.messageClass),c.append(d)}}function S(){n.closeButton&&(p.addClass(n.closeClass).attr("role","button"),c.prepend(p))}function I(){n.progressBar&&(m.addClass(n.progressClass),c.prepend(m))}function O(){n.rtl&&c.addClass("rtl")}function M(e,t){if(e.preventDuplicates){if(t.message===s)return!0;s=t.message}return!1}function E(t){var a=t&&!1!==n.closeMethod?n.closeMethod:n.hideMethod,s=t&&!1!==n.closeDuration?n.closeDuration:n.hideDuration,i=t&&!1!==n.closeEasing?n.closeEasing:n.hideEasing;if(!e(":focus",c).length||t)return clearTimeout(f.intervalId),c[a]({duration:s,easing:i,complete:function(){y(c),clearTimeout(l),n.onHidden&&"hidden"!==g.state&&n.onHidden(),g.state="hidden",g.endTime=new Date,C(g)}})}function H(){(n.timeOut>0||n.extendedTimeOut>0)&&(l=setTimeout(E,n.extendedTimeOut),f.maxHideTime=parseFloat(n.extendedTimeOut),f.hideEta=(new Date).getTime()+f.maxHideTime)}function F(){clearTimeout(l),f.hideEta=0,c.stop(!0,!0)[n.showMethod]({duration:n.showDuration,easing:n.showEasing})}function A(){var e=(f.hideEta-(new Date).getTime())/f.maxHideTime*100;m.width(e+"%")}}function x(){return e.extend({},b(),o.options)}function y(e){t||(t=r()),e.is(":visible")||(e.remove(),e=null,0===t.children().length&&(t.remove(),s=void 0))}}()}.apply(t,s),void 0===i||(e.exports=i)})(a("07d6"))},a4dc:function(e,t,a){"use strict";a.r(t),a.d(t,"eventBus",(function(){return I}));var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("lang"),a("div",{staticClass:"content-page"},[a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row mt-5"},[a("settings-edit")],1)])])])],1)},i=[],n=a("e808"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card-box"},[s("h4",[s("b",[e._v(e._s(e.lang["your-settings"]))])]),s("br"),s("form",{attrs:{id:"form-settings"},on:{submit:function(t){return t.preventDefault(),e.editSettings(t)}}},[s("div",{staticClass:"row"},[[s("el-tabs",{attrs:{"tab-position":"left"}},[s("el-tab-pane",{attrs:{label:e.lang["school-information"]}},[s("div",{staticClass:"row",staticStyle:{"padding-left":"15px"}},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",[e._v(e._s(e.lang["school-name"]))]),s("el-input",{attrs:{required:"",name:"name",placeholder:e.lang["school-name"]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("label",[e._v(e._s(e.lang["logo"]))]),""!=this.logoName?s("upload",{attrs:{"src-img":this.getUrlToContents()+"settings/"+this.logoName,"src-name":this.logoName,"do-upload":"true","box-height":"200","return-name":"logo","input-name":"file","bucket-key":"uploads/settings",acceptable:".png,.jpg,.jpeg"}}):e._e()],1),s("div",{staticClass:"col-6"},[s("div",{staticClass:"form-group"},[s("label",[e._v(e._s(e.lang["description"]))]),s("el-input",{attrs:{name:"description",placeholder:e.lang["description"]},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),s("label",[e._v(e._s(e.lang["favicon"]))]),""!=this.faviconName?s("upload",{attrs:{"src-img":this.getUrlToContents()+"settings/"+this.faviconName,"src-name":this.faviconName,"do-upload":"true","box-height":"200","return-name":"favicon","input-name":"file","bucket-key":"uploads/settings",acceptable:".png,.jpg,.jpeg"}}):e._e()],1)])]),s("el-tab-pane",{attrs:{label:e.lang["contact-information"]}},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v(e._s(e.lang["email"]))]),s("el-input",{attrs:{name:"email",placeholder:e.lang["email"]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v(e._s(e.lang["phone"]))]),s("el-input",{attrs:{name:"phone",placeholder:e.lang["phone"]},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)])]),s("el-tab-pane",{attrs:{label:e.lang["general-settings"]}},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v(e._s(e.lang["language"]))]),s("br"),s("el-select",{attrs:{name:"language",placeholder:"Select your language"},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}},[s("el-option",{attrs:{label:"en",value:"en"}},[s("span",{staticStyle:{float:"left"}},[e._v("en")]),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[s("img",{attrs:{src:a("b082"),alt:"en"}})])]),s("el-option",{attrs:{label:"es",value:"es"}},[s("span",{staticStyle:{float:"left"}},[e._v("es")]),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[s("img",{attrs:{src:a("91cc"),alt:"es"}})])]),s("el-option",{attrs:{label:"pt-br",value:"pt-br"}},[s("span",{staticStyle:{float:"left"}},[e._v("pt-br")]),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[s("img",{attrs:{src:a("7ad3"),alt:"pt-br"}})])])],1)],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v("Time/zone")]),s("br"),s("el-select",{attrs:{filterable:"",name:"timezone",placeholder:"Select your Time/Zone"},model:{value:e.timezone,callback:function(t){e.timezone=t},expression:"timezone"}},e._l(e.zones,(function(t){return s("el-option",{key:t,attrs:{label:t,value:t}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t))])])})),1)],1)]),s("div",{staticClass:"col-12"},[s("div",{staticClass:"form-group"},[s("label",[e._v(e._s(e.lang["marketplace"]))]),s("br"),s("el-switch",{attrs:{name:"marketplace"},model:{value:e.marketplace,callback:function(t){e.marketplace=t},expression:"marketplace"}})],1)])])],1)]],2),s("el-button",{staticClass:"sbr-btn sbr-primary",attrs:{"native-type":"submit",type:"primary",size:"medium"}},[e._v(e._s(e.lang["save-button"]))])],1)]),s("helper-progress")],1)},l=[],r=(a("a4d3"),a("e01a"),a("b0c0"),a("2b0e")),c=a("bc3a"),u=a.n(c),d=a("a7fe"),m=a.n(d),p=a("3140"),f=a("a82d"),g=a("5c96"),h=a.n(g),v=(a("0fae"),a("8ed8")),b=a("9808");r["default"].use(h.a),r["default"].use(m.a,u.a);var C={mixins:[v["a"],b["a"]],data:function(){return{name:"",email:"",description:"",phone:"",logoName:"",faviconName:"",language:"",marketplace:!1,lang:{},timezone:"",zones:[]}},components:{Upload:p["a"],HelperProgress:f["a"]},created:function(){this.getSettings(),this.getTimeZone()},mounted:function(){n["b"].$on("lang",function(e){this.lang=e}.bind(this))},methods:{getSettings:function(){var e=this.getUrlToMakeRequest("settings","getSettingsInformation");u.a.get(e).then(function(e){this.faviconName=e.data["favicon"],this.name=e.data["name"],this.description=e.data["description"],this.email=e.data["email"],this.phone=e.data["phone"],this.timezone=e.data["zone"],this.language=e.data["lang"],"on"==e.data["marketplace"]?this.marketplace=!0:this.marketplace=!1,this.logoName=e.data["logo"],this.faviconName=e.data["favicon"]}.bind(this))},getTimeZone:function(){u.a.get("https://worldtimeapi.org/api/timezone").then(function(e){this.zones=e.data}.bind(this))},editSettings:function(){var e=this,t=document.getElementById("form-settings"),a=new FormData(t),s=this.getUrlToMakeRequest("settings","edit");u.a.post(s,a).then((function(){e.successMessage()}),function(){this.errorMessage()}.bind(this))}}},w=C,x=a("2877"),y=Object(x["a"])(w,o,l,!1,null,"1f6e72db",null),k=y.exports,T=a("342d"),N=a.n(T),D=a("6ed5"),_=a("9dee"),S=a("a20e"),I=new r["default"];r["default"].use(m.a,u.a),r["default"].use(N.a);var O={mixins:[v["a"],b["a"],_["a"],D["a"],S["a"]],created:function(){this.verifySession(),this.verifyAdministratorPrivileges(),this.loadIntegrations(),this.createFavicon()},head:{title:{inner:"Settings"},meta:[{name:"charset",content:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1.0"},{name:"author",content:"Sabiorealm"}]},components:{SettingsEdit:k,Lang:n["a"]}},M=O,E=Object(x["a"])(M,s,i,!1,null,null,null);t["default"]=E.exports},f2d9:function(e,t,a){}}]);
//# sourceMappingURL=settings.111e0148013f98a0d74b.js.map